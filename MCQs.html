<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta property="og:title" content="MCQs">
<meta property="og:description" content="Data Science i thiam em?">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MCQs</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* --------------------------------------------------
   GLOBAL 
-------------------------------------------------- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
               "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  background: #fcfcfc;
  padding: 20px;
  color: #111;
  line-height: 1.5;
}

/* --------------------------------------------------
   NAVBAR
-------------------------------------------------- */
.navbar {
  width: 100%;
  background: rgba(255,255,255,0.8);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid #e2e2e7;

  padding: 14px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;

  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
}

.logo {
  font-size: 1.4rem;
  font-weight: 600;
}

.nav-links a {
  color: #000;
  text-decoration: none;
  font-weight: 500;
  margin-left: 14px;
  padding: 6px 10px;
  border-radius: 6px;
  transition: background 0.2s;
}

.nav-links a:hover {
  background: #e5e5e7;
}

.hamburger {
  display: none;
  font-size: 1.8rem;
  cursor: pointer;
}

@media (max-width: 768px) {
  .hamburger {
    display: block;
  }

  .nav-links {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 58px;
    right: 10px;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(12px);
    padding: 8px 12px;
    border-radius: 10px;

    /* animation behavior */
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.25s ease;
  }

/* --------------------------------------------------
   HEADER
-------------------------------------------------- */
.header {
  margin-top: 90px;
  text-align: center;
}

.header h2 {
  font-size: 2.0rem;
  font-weight: 600;
  letter-spacing: -0.5px;
  font-style: italic;
  opacity: 0.95;
}

.submission-note {
  margin-top: 4px;
  font-size: 0.9rem;
  opacity: 0.7;
  text-align: right !important;
}

/* --------------------------------------------------
   QUESTION CONTAINERS
-------------------------------------------------- */
.content {
  margin-top: 20px;
}

.question-container {
  background: linear-gradient(to bottom, #d7ecf4 0%, #f5f5f7 100%);
  border: none !important;
  border-radius: 0 !important;
  padding: 18px;
  margin-bottom: 18px;
}


.question-container:hover {
  border-color: #c7c7c7;
}

.question p {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 12px;
}

/* --------------------------------------------------
   OPTIONS
-------------------------------------------------- */
.question label {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  margin-bottom: 10px;
  cursor: pointer;
  font-size: 16px;
}

/* Apple radio buttons */
input[type="radio"] {
  appearance: none;
  width: 18px;
  height: 18px;
  border: 2px solid #555;
  border-radius: 50%;
  background: #fff;
  position: relative;
  cursor: pointer;
  flex-shrink: 0 !important;
}

input[type="radio"]:checked {
  border-color: #007aff;
  background-color: #007aff;
}

input[type="radio"]:checked::after {
  content: "";
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 8px;
  height: 8px;
  background: #fff;
  border-radius: 50%;
}

.option-correct { color: #009a28; font-weight: 600; }
.option-wrong { color: #d90000; font-weight: 600; }

/* --------------------------------------------------
   FEEDBACK TEXT
-------------------------------------------------- */
.question .feedback {
  font-size: 0.78rem !important;
  margin-top: 6px !important;
  opacity: 0.85;
}

/* --------------------------------------------------
   BUTTONS 
-------------------------------------------------- */
.btn {
  padding: 12px 28px;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 999px;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
  border: none;
  backdrop-filter: saturate(180%) blur(10px);
}

/* --------------------------------------------------
   
-------------------------------------------------- */

/* NEXT & PREVIOUS (inside pagination) */
#pagination-controls .btn {
  background: #0071e3 !important;
  color: white !important;
  border: none !important;
}

#pagination-controls .btn:hover {
  background: #0077ed !important;
  color: white !important;
}

/* SUBMIT & RESET BUTTONS */
#submit-btn,
#reset-btn {
  background: transparent !important;
  border: 2px solid #0071e3 !important;
  color: #0071e3 !important;
}

#submit-btn:hover,
#reset-btn:hover {
  background: #0071e3 !important;
  color: white !important;
}

/* --------------------------------------------------
   RESULTS
-------------------------------------------------- */
.result-container {
  margin-top: 20px;
  background: #ffffff;
  padding: 16px;
  border-radius: 10px;
  border: 1px solid #dedede;
  font-size: 1rem;
  font-weight: 600;
}

/* --------------------------------------------------
   MOBILE
-------------------------------------------------- */
@media (max-width: 600px) {
  .question label {
    gap: 10px;
    margin-bottom: 10px;
  }

  input[type="radio"] {
    width: 16px;
    height: 16px;
  }

  input[type="radio"]:checked::after {
    width: 7px;
    height: 7px;
  }
}
</style>
</head>

<body>


<div class="navbar">
  <div class="logo">MCQs</div>
  <div class="nav-links">
    <a href="/index.html">Inpui Kalna</a>
  </div>
  <div class="hamburger" onclick="toggleMenu()">☰</div>
</div>


<div class="header">
  <h2><span style="color:#1f77b4;">Data Science</span> i thiam em?</h2>
  <p class="submission-note">*Submit-na page tawp berah a awm</p>
</div>

<!-- CONTENT -->
<div class="content">
  <div id="mcq-container"></div>
  <div id="pagination-controls"></div>

  <div style="text-align:center;">
    <button id="submit-btn" class="btn" onclick="checkAnswers()">Submit</button>
    <button id="reset-btn" class="btn" onclick="resetTest()">Reset</button>
  </div>

  <div id="result-container" class="result-container">
    <h3>Test Results</h3>
    <p id="result-text"></p>
  </div>
</div>

<script>
function toggleMenu() {
    document.querySelector(".nav-links").classList.toggle("active");
}
// Auto-close when a link is clicked
document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".nav-links a").forEach(link => {
        link.addEventListener("click", () => {
            document.querySelector(".nav-links").classList.remove("active");
        });
    });
});
let answerFeedback = [];   

const QUESTIONS_PER_PAGE = 25;

let allQuestions = [];
let currentPage = 1;


let userAnswers = [];

// Load JSON
function loadQuestions(callback) {
    fetch('questions.json')
        .then(r => r.json())
        .then(callback)
        .catch(err => console.error("JSON Load Error:", err));
}

function displayQuestionsPaginated() {
    let container = document.getElementById("mcq-container");
    container.innerHTML = "";

    const start = (currentPage - 1) * QUESTIONS_PER_PAGE;
    const end = start + QUESTIONS_PER_PAGE;
    const questions = allQuestions.slice(start, end);

    questions.forEach((q, index) => {
        let globalIndex = start + index;

        let card = document.createElement("div");
        card.className = "question-container";

        let qDiv = document.createElement("div");
        qDiv.className = "question";

        qDiv.innerHTML = `<p>${globalIndex + 1}. ${q.text}</p>`;

        q.options.forEach(option => {
            let label = document.createElement("label");

            let radio = document.createElement("input");
            radio.type = "radio";
            radio.name = `q${globalIndex}`;
            radio.value = option;

            // RESTORE SAVED ANSWER
            if (userAnswers[globalIndex] === option) {
                radio.checked = true;
            }

            // SAVE ANSWER
            radio.addEventListener("change", () => {
                userAnswers[globalIndex] = option;
            });

            label.appendChild(radio);

            let span = document.createElement("span");
            span.textContent = option;
            label.appendChild(span);

            qDiv.appendChild(label);
        });

        let ans = document.createElement("span");
        ans.className = "answer";
        ans.dataset.correct = q.answer;
        ans.style.display = "none";
        qDiv.appendChild(ans);

        card.appendChild(qDiv);
        container.appendChild(card);
    });

    showPaginationControls();
	applyFeedbackToCurrentPage();
}

function applyFeedbackToCurrentPage() {
    let questionsOnPage = document.getElementsByClassName("question");

    Array.from(questionsOnPage).forEach((qDiv, i) => {
        let globalIndex = (currentPage - 1) * QUESTIONS_PER_PAGE + i;

        let chosen = userAnswers[globalIndex];
        let status = answerFeedback[globalIndex]; // "correct", "wrong", or null
        let correct = allQuestions[globalIndex].answer;

        // Remove old feedback
        let old = qDiv.querySelector(".feedback");
        if (old) old.remove();

        let spans = qDiv.querySelectorAll("label span");

        if (status === null) {
            // unanswered → do nothing
            return;
        }

        let feedbackP = document.createElement("p");
        feedbackP.classList.add("feedback");

        if (status === "correct") {
            spans.forEach(span => {
                if (span.textContent === correct) span.classList.add("option-correct");
            });
            feedbackP.innerHTML = `<span style="color:green;">Correct!</span>`;
        }

        if (status === "wrong") {
            spans.forEach(span => {
                if (span.textContent === correct) span.classList.add("option-correct");
                if (span.textContent === chosen) span.classList.add("option-wrong");
            });
            feedbackP.innerHTML =
                `<span style="color:red;">A DIK LO!</span><br>
                 <span style="color:green;">Correct answer: ${correct}</span>`;
        }

        qDiv.appendChild(feedbackP);
    });
}

function fastScrollToTop() {
    const start = window.scrollY;
    const duration = 200;  
    const startTime = performance.now();

    function animation(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);

        window.scrollTo(0, start * (1 - progress));

        if (progress < 1) requestAnimationFrame(animation);
    }

    requestAnimationFrame(animation);
}



/* Pagination */
function showPaginationControls() {
    const totalPages = Math.ceil(allQuestions.length / QUESTIONS_PER_PAGE);
    let container = document.getElementById("pagination-controls");

    if (!container) {
        container = document.createElement("div");
        container.id = "pagination-controls";
        container.style.textAlign = "center";
        container.style.marginTop = "20px";
        document.querySelector(".content").appendChild(container);
    }

    container.innerHTML = `
        ${currentPage > 1 ? `<button class="btn" onclick="prevPage()">Previous</button>` : ""}
        ${currentPage < totalPages ? `<button class="btn" onclick="nextPage()">Next</button>` : ""}
        <p style="margin-top:10px;">Page ${currentPage} of ${totalPages}</p>
    `;

    // Only show submit on last page
    document.getElementById("submit-btn").style.display =
        currentPage === totalPages ? "inline-block" : "none";
}


function nextPage() {
    currentPage++;
    displayQuestionsPaginated();
    window.scrollTo(0, 0);  
}

function prevPage() {
    currentPage--;
    displayQuestionsPaginated();
     
}




/* Check ALL answers */
function checkAnswers() {
    let correctCount = 0;
    let unanswered = 0;

    answerFeedback = [];  // reset feedback storage

    allQuestions.forEach((q, index) => {
        let chosen = userAnswers[index];

        if (!chosen) {
            answerFeedback[index] = null;   // unanswered → no feedback
            unanswered++;
        } else if (chosen === q.answer) {
            answerFeedback[index] = "correct";
            correctCount++;
        } else {
            answerFeedback[index] = "wrong";
        }
    });

    document.getElementById("result-text").innerHTML =
        `Correct: <span style="color:green;">${correctCount}</span>
         | Unanswered: <span style="color:red;">${unanswered}</span>`;

    // Lock all radios
    document.querySelectorAll("input[type='radio']").forEach(r => r.disabled = true);

    document.getElementById("submit-btn").disabled = true;
    document.getElementById("reset-btn").style.display = "inline-block";

    // APPLY FEEDBACK TO CURRENT PAGE
    applyFeedbackToCurrentPage();
}




function resetTest() {
    userAnswers = [];
    answerFeedback = [];
    currentPage = 1;

    document.getElementById("result-text").innerHTML = "";
    document.getElementById("submit-btn").disabled = false;
    document.getElementById("reset-btn").style.display = "none";

    // Remove ALL feedback messages
    document.querySelectorAll(".feedback").forEach(el => el.remove());

    // Remove all highlight classes
    document.querySelectorAll(".option-correct").forEach(el =>
        el.classList.remove("option-correct")
    );
    document.querySelectorAll(".option-wrong").forEach(el =>
        el.classList.remove("option-wrong")
    );

    // Jump instantly to top
    window.scrollTo(0, 0);

    displayQuestionsPaginated();
}
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}


document.addEventListener("DOMContentLoaded", function () {
    loadQuestions(data => {
    allQuestions = data.questions;
    shuffle(allQuestions);     
    displayQuestionsPaginated();
	});
});
</script>

</body>
</html>
